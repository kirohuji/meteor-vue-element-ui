{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/imports/ui/components/HeaderSearch/index.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions",["flow",{}],"nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"jsx","jsx","jsx","jsx","jsx"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"sourceFileName":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/imports/ui/components/HeaderSearch/index.vue","filename":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/imports/ui/components/HeaderSearch/index.vue","passPerPreset":false,"envName":"development","cwd":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui","root":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.7.6","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}},{"key":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/node_modules/@vue/babel-preset-jsx/dist/plugin.cjs.js$0","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/node_modules/@vue/babel-preset-jsx/dist/plugin.cjs.js$1","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/node_modules/@vue/babel-preset-jsx/dist/plugin.cjs.js$2","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/node_modules/@vue/babel-preset-jsx/dist/plugin.cjs.js$3","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"babel-plugin-transform-vue-jsx","visitor":{"_exploded":{},"_verified":{},"JSXElement":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/imports/ui/components/HeaderSearch/index.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/imports/ui/components/HeaderSearch/index.vue"}},"code":"!function (module1) {\n  var _toConsumableArray;\n\n  module1.link(\"@babel/runtime/helpers/toConsumableArray\", {\n    default: function (v) {\n      _toConsumableArray = v;\n    }\n  }, 0);\n  var Fuse;\n  module1.link(\"fuse.js\", {\n    \"default\": function (v) {\n      Fuse = v;\n    }\n  }, 0);\n  var path;\n  module1.link(\"path\", {\n    \"default\": function (v) {\n      path = v;\n    }\n  }, 1);\n  module1.exportDefault({\n    name: 'HeaderSearch',\n    data: function () {\n      return {\n        search: '',\n        options: [],\n        searchPool: [],\n        show: false,\n        fuse: undefined\n      };\n    },\n    computed: {\n      routes: function () {\n        return this.$store.getters.permission_routes;\n      }\n    },\n    watch: {\n      routes: function () {\n        this.searchPool = this.generateRoutes(this.routes);\n      },\n      searchPool: function (list) {\n        this.initFuse(list);\n      },\n      show: function (value) {\n        if (value) {\n          document.body.addEventListener('click', this.close);\n        } else {\n          document.body.removeEventListener('click', this.close);\n        }\n      }\n    },\n    mounted: function () {\n      this.searchPool = this.generateRoutes(this.routes);\n    },\n    methods: {\n      click: function () {\n        this.show = !this.show;\n\n        if (this.show) {\n          this.$refs.headerSearchSelect && this.$refs.headerSearchSelect.focus();\n        }\n      },\n      close: function () {\n        this.$refs.headerSearchSelect && this.$refs.headerSearchSelect.blur();\n        this.options = [];\n        this.show = false;\n      },\n      change: function (val) {\n        var _this = this;\n\n        this.$router.push(val.path);\n        this.search = '';\n        this.options = [];\n        this.$nextTick(function () {\n          _this.show = false;\n        });\n      },\n      initFuse: function (list) {\n        this.fuse = new Fuse(list, {\n          shouldSort: true,\n          threshold: 0.4,\n          location: 0,\n          distance: 100,\n          maxPatternLength: 32,\n          minMatchCharLength: 1,\n          keys: [{\n            name: 'title',\n            weight: 0.7\n          }, {\n            name: 'path',\n            weight: 0.3\n          }]\n        });\n      },\n      // Filter out the routes that can be displayed in the sidebar\n      // And generate the internationalized title\n      generateRoutes: function (routes) {\n        var basePath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '/';\n        var prefixTitle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        var res = [];\n\n        for (var _iterator = routes, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n\n          var _router = _ref;\n\n          // skip hidden router\n          if (_router.hidden) {\n            continue;\n          }\n\n          var _data = {\n            path: path.resolve(basePath, _router.path),\n            title: _toConsumableArray(prefixTitle)\n          };\n\n          if (_router.meta && _router.meta.title) {\n            _data.title = [].concat(_toConsumableArray(_data.title), [_router.meta.title]);\n\n            if (_router.redirect !== 'noRedirect') {\n              // only push the routes with title\n              // special case: need to exclude parent router without redirect\n              res.push(_data);\n            }\n          } // recursive child routes\n\n\n          if (_router.children) {\n            var tempRoutes = this.generateRoutes(_router.children, _data.path, _data.title);\n\n            if (tempRoutes.length >= 1) {\n              res = [].concat(_toConsumableArray(res), _toConsumableArray(tempRoutes));\n            }\n          }\n        }\n\n        return res;\n      },\n      querySearch: function (query) {\n        if (query !== '') {\n          this.options = this.fuse.search(query);\n        } else {\n          this.options = [];\n        }\n      }\n    }\n  });\n}.call(this, module);","map":{"version":3,"sources":["/Users/lourd/Desktop/bpmn/meteor-vue-element-ui/imports/ui/components/HeaderSearch/index.vue"],"names":["_toConsumableArray","module1","link","default","v","Fuse","path","exportDefault","name","data","search","options","searchPool","show","fuse","undefined","computed","routes","$store","getters","permission_routes","watch","generateRoutes","list","initFuse","value","document","body","addEventListener","close","removeEventListener","mounted","methods","click","$refs","headerSearchSelect","focus","blur","change","val","$router","push","$nextTick","shouldSort","threshold","location","distance","maxPatternLength","minMatchCharLength","keys","weight","basePath","prefixTitle","res","router","hidden","resolve","title","meta","redirect","children","tempRoutes","length","querySearch","query"],"mappings":"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","sourcesContent":["\n// fuse is a lightweight fuzzy-search module\n// make search results more in line with expectations\nimport Fuse from 'fuse.js'\nimport path from 'path'\n\nexport default {\n  name: 'HeaderSearch',\n  data() {\n    return {\n      search: '',\n      options: [],\n      searchPool: [],\n      show: false,\n      fuse: undefined\n    }\n  },\n  computed: {\n    routes() {\n      return this.$store.getters.permission_routes\n    }\n  },\n  watch: {\n    routes() {\n      this.searchPool = this.generateRoutes(this.routes)\n    },\n    searchPool(list) {\n      this.initFuse(list)\n    },\n    show(value) {\n      if (value) {\n        document.body.addEventListener('click', this.close)\n      } else {\n        document.body.removeEventListener('click', this.close)\n      }\n    }\n  },\n  mounted() {\n    this.searchPool = this.generateRoutes(this.routes)\n  },\n  methods: {\n    click() {\n      this.show = !this.show\n      if (this.show) {\n        this.$refs.headerSearchSelect && this.$refs.headerSearchSelect.focus()\n      }\n    },\n    close() {\n      this.$refs.headerSearchSelect && this.$refs.headerSearchSelect.blur()\n      this.options = []\n      this.show = false\n    },\n    change(val) {\n      this.$router.push(val.path)\n      this.search = ''\n      this.options = []\n      this.$nextTick(() => {\n        this.show = false\n      })\n    },\n    initFuse(list) {\n      this.fuse = new Fuse(list, {\n        shouldSort: true,\n        threshold: 0.4,\n        location: 0,\n        distance: 100,\n        maxPatternLength: 32,\n        minMatchCharLength: 1,\n        keys: [{\n          name: 'title',\n          weight: 0.7\n        }, {\n          name: 'path',\n          weight: 0.3\n        }]\n      })\n    },\n    // Filter out the routes that can be displayed in the sidebar\n    // And generate the internationalized title\n    generateRoutes(routes, basePath = '/', prefixTitle = []) {\n      let res = []\n\n      for (const router of routes) {\n        // skip hidden router\n        if (router.hidden) { continue }\n\n        const data = {\n          path: path.resolve(basePath, router.path),\n          title: [...prefixTitle]\n        }\n\n        if (router.meta && router.meta.title) {\n          data.title = [...data.title, router.meta.title]\n\n          if (router.redirect !== 'noRedirect') {\n            // only push the routes with title\n            // special case: need to exclude parent router without redirect\n            res.push(data)\n          }\n        }\n\n        // recursive child routes\n        if (router.children) {\n          const tempRoutes = this.generateRoutes(router.children, data.path, data.title)\n          if (tempRoutes.length >= 1) {\n            res = [...res, ...tempRoutes]\n          }\n        }\n      }\n      return res\n    },\n    querySearch(query) {\n      if (query !== '') {\n        this.options = this.fuse.search(query)\n      } else {\n        this.options = []\n      }\n    }\n  }\n}\n"]},"sourceType":"module","hash":"a97ee3fcaf02ea2406486c7b40d707d44bc61e00"}
